<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Your Library | Digital Library Hub</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .library-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 20px;
      padding: 40px;
    }
    .book-card {
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
      padding: 15px;
      text-align: center;
      transition: transform 0.3s;
    }
    .book-card:hover { transform: scale(1.05); }
    .book-card img {
      width: 100%;
      height: 250px;
      object-fit: cover;
      border-radius: 10px;
    }
    .book-card h3 { margin: 10px 0 5px; color: #2c3e50; }
    .book-card p { color: #555; font-size: 14px; }
    .read-btn, .remove-btn {
      background: #3a3a98;
      color: white;
      border: none;
      padding: 8px 12px;
      margin-top: 10px;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
    }
    .read-btn:hover { background: #4a4ab8; }
    .remove-btn {
      background: #e74c3c;
      margin-left: 10px;
    }
    .remove-btn:hover { background: #c0392b; }
    .footer { text-align: center;
       padding: 20px; 
       background: #222; 
       color: #fff; 
    }
  </style>
</head>
<body>
  <header>
    <h1>ðŸ“š Your Saved Library</h1>
    <nav class="navbar">
      <a href="index.html">Home</a>
      <a href="Featured.html">Featured</a>
      <a href="Event.html">Events</a>
      <a href="Authors.html">Authors</a>
      <a href="Library.html" class="active">Library</a>
    </nav>
  </header>

  <section class="library-container" id="savedBooksContainer"></section>

  <footer class="footer">
    <p>Â© 2025 Digital Library Hub | All Rights Reserved</p>
  </footer>

  <script>
    const container = document.getElementById("savedBooksContainer");

    // Function to display saved books
    function renderLibrary() {
      const savedBooks = JSON.parse(localStorage.getItem("savedBooks")) || [];
      container.innerHTML = "";

      if (savedBooks.length === 0) {
        container.innerHTML = "<p style='text-align:center;margin-top:40px;'>No saved books yet.</p>";
        return;
      }

      savedBooks.forEach(book => {
        const div = document.createElement("div");
        div.classList.add("book-card");
        div.innerHTML = `
          <img src="${book.img}" alt="${book.title}">
          <h3>${book.title}</h3>
          <p>by ${book.author}</p>
          <button class="read-btn">ðŸ“– Read</button>
          <button class="remove-btn">ðŸ—‘ Remove</button>
        `;

        // ðŸ—‘ Remove button function
        div.querySelector(".remove-btn").addEventListener("click", () => {
          const updatedBooks = savedBooks.filter(b => b.title !== book.title);
          localStorage.setItem("savedBooks", JSON.stringify(updatedBooks));
          renderLibrary(); // Refresh list
        });

        container.appendChild(div);
      });
    }

    // First load
    renderLibrary();

    // ðŸ”„ Auto-refresh when localStorage changes
    window.addEventListener("storage", (event) => {
      if (event.key === "savedBooks") {
        renderLibrary();
      }
    });
  </script>

  <!-- ===== Story Modal (paste this before </body>) ===== -->
<div id="storyModal" class="story-modal" aria-hidden="true">
  <div class="story-content" role="dialog" aria-modal="true">
    <button id="closeModal" class="close-modal" aria-label="Close story">&times;</button>
    <h2 id="storyTitle">Title</h2>
    <div id="storyText" class="story-text"></div>
  </div>
</div>

<style>
.story-modal { display: none; position: fixed; z-index: 9999; inset: 0; background: rgba(0,0,0,0.6); align-items: center; justify-content: center; padding: 20px; }
.story-modal.show { display: flex; }
.story-content { background: #fff; max-width: 800px; width: 100%; max-height: 80vh; overflow-y: auto; border-radius: 12px; padding: 22px; box-shadow: 0 8px 30px rgba(0,0,0,0.3); position: relative; }
.close-modal { position: absolute; right: 14px; top: 10px; border: none; background: transparent; font-size: 26px; cursor: pointer; }
.story-text { white-space: pre-line; line-height: 1.6; color: #333; }
.story-content h2 { margin-top: 0; color: #2b2b7a; }
</style>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const stories = {
    "English Academic": "English Academic focuses on building studentsâ€™ skills in reading, writing, and critical thinking. It teaches how to construct well-organized essays, use appropriate grammar, and express ideas clearly. Students explore various forms of literature, academic writing, and speech.  \n\n Through research and discussions, they learn how to analyze information effectively. The subject promotes intellectual growth and clarity in communication.\n\n Overall, it prepares learners to write and speak confidently in academic and real-world settings.",
    "Philippine History": "Philippine History explores the countryâ€™s journey from pre-colonial times to the present day. It discusses how early Filipino societies lived, traded, and governed themselves before the arrival of foreign powers. The book also narrates the Spanish colonization, American occupation, and Japanese invasion that shaped the nationâ€™s identity. It highlights the struggles and heroism of Filipinos who fought for independence and freedom. By understanding the past, readers can appreciate the countryâ€™s culture, traditions, and values. Ultimately, it helps students realize how history connects to the nationâ€™s current challenges and future aspirations.",
    "Noli Me Tangere": "Noli Me Tangere is a novel written by Dr. JosÃ© Rizal that exposed the injustices and corruption under Spanish rule in the Philippines. The story follows Crisostomo Ibarra, a young Filipino who returns home after studying abroad, hoping to improve his country through education. However, he soon faces the cruelty of friars and officials who abuse their power. Through its characters, the novel reveals the suffering of Filipinos under colonial oppression. It inspired national consciousness and became a key factor in the fight for independence. Noli Me Tangere remains a timeless reminder of courage, patriotism, and the power of truth.",
    "Splinters": "Splinters tells the story of two people shattered by their pasts, both struggling to piece their lives back together. When fate brings them together, they find comfort in their shared pain and unspoken understanding. As their friendship deepens, they begin to heal old wounds and rediscover hope. Yet, the fear of being hurt again keeps them from embracing love completely. The story beautifully captures how broken people can still find light in one another. In the end, Splinters reminds us that healing is not about becoming whole againâ€”but learning to live with the cracks.",
    "Night Shade": "Night Shade is a tale of forbidden love wrapped in mystery and danger. It follows two souls from opposing sides of a hidden war who are drawn to each other despite the risks. Their secret meetings blur the line between passion and peril. As secrets unravel, they realize that love could either destroy or save them. Every choice they make brings them closer to the truth and further from safety. Night Shade is a haunting romance that proves love can bloom even in the shadows.","Romance Rivalry": "Romance Rivalry follows two best friends who find themselves in love with the same person. What begins as innocent admiration turns into a silent battle of hearts. Jealousy, confusion, and loyalty tear at their friendship as emotions grow stronger. Each must decide what matters moreâ€”love or the bond theyâ€™ve built for years. The story captures the bittersweet pain of unspoken feelings and difficult choices. In the end, it teaches that sometimes, the heart winsâ€”but friendship endures.",
    "Queen of Carrion": "Queen of Carrion is a dark fantasy about a fallen princess who rises from the ruins of her kingdom. Betrayed by those she trusted, she swears vengeance against the forces that destroyed her world. Along her journey, she faces monsters born from decay and corruption. Through pain and blood, she reclaims her power and destiny. The story weaves themes of survival, strength, and the price of reclaiming a throne. Queen of Carrion is a haunting saga of rebirth in a world ruled by death.",
    "The Lottery": "The Lottery by Shirley Jackson is a chilling story about tradition, conformity, and human cruelty. In a small, peaceful village, residents gather annually for a mysterious lottery. The event begins cheerfully but slowly reveals its horrifying purpose. What appears to be a harmless ritual ends in shocking violence. The story forces readers to question blind obedience to outdated customs. Its quiet terror lingers long after the final line, exposing the darkness that can hide in ordinary people.",
    "SwordHeart": "SwordHeart follows a reluctant hero who inherits a cursed sword bound to a warriorâ€™s spirit. Together, they embark on a dangerous journey filled with humor, heart, and unexpected friendship. As they fight mythical beasts and uncover ancient secrets, their bond deepens beyond duty. The story blends fantasy adventure with emotional growth and self-discovery. Every swing of the sword brings them closer to freedomâ€”and understanding their purpose. In the end, SwordHeart reminds us that courage and companionship can break even the strongest curses.",
    "Tear my World": "Tear My World is a science fiction story set in a future where humanityâ€™s obsession with technology has torn the planet apart. A brilliant young scientist tries to undo the damage caused by her own invention. As she fights against corrupt leaders and her guilty conscience, she discovers that saving the world means facing her deepest fears. The story explores the balance between progress and destruction. Each choice she makes could either restore the Earth or destroy it forever. Tear My World is a gripping reminder that redemption often comes at the cost of sacrifice.",
    "True Beauty": "True Beauty tells the story of a young woman who struggles with her self-image in a world obsessed with perfection. Through makeup and social media, she hides her insecurities behind a flawless faÃ§ade. But when she meets someone who sees her true self, her perspective begins to change. The story explores the pressures of beauty standards and the journey toward self-acceptance. It shows that real confidence comes from within, not from appearances. True Beauty reminds us that the most beautiful thing we can be is authentic.",
    "My Fair Position": "My Fair Position blends romance and fantasy in a world where power and status define destiny. A humble woman rises to an unexpected position in the royal court, where ambition and love collide. Torn between her duties and her growing feelings for a noble prince, she must choose between heart and honor. Intrigue, betrayal, and passion test her courage as she learns her true worth. The story celebrates determination and the strength to defy expectations. In the end, love becomes both her greatest challenge and triumph.",
    "Underworld": "Underworld follows a fallen warrior trapped in a realm between life and death. Haunted by his past, he seeks redemption by fighting the demons that dwell within and around him. Along the way, he meets lost souls who teach him about forgiveness and fate. The journey through darkness becomes a test of spirit and sacrifice. With each battle, he moves closer to reclaiming his humanity. Underworld is a story of loss, redemption, and the eternal struggle to find peace in the afterlife.",
    "Doom Breaker": "Doom Breaker tells the story of a warrior cursed by the gods and doomed to repeat his tragic fate. When given a second chance, he vows to rewrite his destiny and protect those he once failed. Each battle pushes him closer to freedomâ€”but also to destruction. Along the way, he learns that strength without compassion leads only to ruin. The story mixes action, mythology, and redemption in an epic struggle against fate. Doom Breaker proves that even in darkness, hope can break the cycle of doom.",
    "His Into Her": "His Into Her is a high school romance filled with humor, rivalry, and heartfelt moments. It follows two students who constantly clash but canâ€™t deny their growing attraction. Through misunderstandings, jealousy, and friendship, they discover the meaning of love and acceptance. The story captures the excitement and awkwardness of young romance. It reminds readers that even opposites can find common ground. His Into Her is a fun, emotional journey through the highs and lows of teenage love.",
    "Echoes of Tomorrow": "Echoes of Tomorrow is a sci-fi story about time, memory, and the choices that define us. A scientist creates a device that allows her to travel back and fix her greatest mistakes. But each change in the past reshapes her present in unpredictable ways. As timelines collapse, she must decide between saving the world or saving the one she loves. The story explores destiny, sacrifice, and the fragile nature of time. Echoes of Tomorrow reminds us that some futures are meant to be lived, not rewritten.",
    "Silent Fate": "Silent Fate tells the story of a novelist whose written words begin to alter reality. At first, he is fascinated by his newfound power to shape the world. But as his stories spiral out of control, fiction and reality start to merge. Characters he created begin acting on their own, rewriting his life. The story explores creativity, guilt, and the burden of control. Silent Fate is a haunting tale about the dangers of imaginationâ€”and the silence that follows when stories go too far."
    

    //  add more keys here; key must match the visible title on the page
  };

  const modal = document.getElementById("storyModal");
  const storyTitle = document.getElementById("storyTitle");
  const storyText = document.getElementById("storyText");
  const closeModal = document.getElementById("closeModal");

  function extractTitleFromCard(card) {
    if (!card) return null;
    const selectors = ["h3", "h4", "h2", "strong", "p > strong", ".title"];
    for (const sel of selectors) {
      const el = card.querySelector(sel);
      if (el && el.textContent.trim()) return el.textContent.trim();
    }
    const fallback = card.querySelector(".book-info h3");
    if (fallback) return fallback.textContent.trim();
    return null;
  }

  const readButtons = Array.from(document.querySelectorAll(".read-btn, button.read-btn"));
  readButtons.forEach(btn => {
    btn.addEventListener("click", (e) => {
      const card = btn.closest(".book, .book-card, .book-info, .book") || btn.parentElement;
      const title = extractTitleFromCard(card) || btn.getAttribute("data-title") || "Untitled Book";
      const content = stories[title] || "Sorry â€” this story is not yet available. Add it to the 'stories' object in the script.";
      storyTitle.textContent = title;
      storyText.textContent = content;
      modal.classList.add("show");
      modal.setAttribute("aria-hidden", "false");
      document.body.style.overflow = "hidden";
    });
  });

  function closeStory() {
    modal.classList.remove("show");
    modal.setAttribute("aria-hidden", "true");
    document.body.style.overflow = "";
  }

  closeModal.addEventListener("click", closeStory);
  modal.addEventListener("click", (e) => { if (e.target === modal) closeStory(); });
  document.addEventListener("keydown", (e) => { if (e.key === "Escape") closeStory(); });

  if (readButtons.length === 0) {
    console.warn("No .read-btn buttons found. Make sure buttons have class=\"read-btn\".");
  } else {
    console.log("Read buttons count:", readButtons.length);
  }
});
</script>

</body>
</html>
